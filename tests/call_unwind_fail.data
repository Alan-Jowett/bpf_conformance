# Copyright (c) Big Switch Networks, Inc
# SPDX-License-Identifier: Apache-2.0
-- asm
# Test that call instruction works and returns a value
# Initialize %r0 to 0 (failure value)
mov %r0, 0
# Set up argument
mov %r1, 0x42
# Call local function
call local func1
# %r0 should now contain 0x42 (the argument passed)
# If call didn't work, test would fail
exit

func1:
# Function that returns its first argument
mov %r0, %r1
exit
-- result
0x42
-- no register offset
call instruction
