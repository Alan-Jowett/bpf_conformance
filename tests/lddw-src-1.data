# Copyright (c) Microsoft Corporation
# SPDX-License-Identifier: MIT
-- map
# map_name  type key_size value_size max_entries
array_map 2 4 4 10
-- asm
mov r2, 1
lddw r1, map_by_fd(array_map)
stxw [r10-4], r2
mov r2, r10
add r2, -4
call bpf_map_lookup_elem
jeq r0, 0, fail
mov r0, 1
exit
fail:
mov r0, 0
exit
-- result
1