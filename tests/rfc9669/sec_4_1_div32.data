# Copyright (c) Microsoft Corporation
# SPDX-License-Identifier: MIT
-- asm
# RFC 9669 4.1: DIV32 (imm/reg) semantics, including div-by-zero behavior.

# imm variant normal
mov32 %r1, 84
div32 %r1, 2
jne32 %r1, 42, fail

# reg variant normal
mov32 %r2, 126
mov32 %r3, 3
div32 %r2, %r3
jne32 %r2, 42, fail

# div-by-zero sets dst to 0 (reg variant)
mov32 %r4, 123
mov32 %r5, 0
div32 %r4, %r5
jne32 %r4, 0, fail

mov %r0, 1
exit
fail:
mov %r0, 0
exit
-- result
0x1
