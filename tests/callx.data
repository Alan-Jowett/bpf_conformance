# Copyright (c) Big Switch Networks, Inc
# SPDX-License-Identifier: Apache-2.0
-- asm
# Test that call via register (callx) works
# Initialize result to failure value
mov %r0, 0
# Set up argument
mov %r1, 0x2a
# Call local function
call local func1
# %r0 should now contain 0x2a from the function
# If call didn't work properly, %r0 would be 0
exit

func1:
# Function that returns its first argument
mov %r0, %r1
exit
-- result
0x2a
-- no register offset
call instruction
